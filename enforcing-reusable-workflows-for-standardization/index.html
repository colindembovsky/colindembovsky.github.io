<!DOCTYPE html>
<html lang="en"><head><title>Enforcing Reusable Workflows for Standardization | Colin’s ALM Corner</title><meta name="generator" content="Jekyll v3.9.0" /><meta property="og:title" content="Enforcing Reusable Workflows for Standardization" /><meta name="author" content="Colin Dembovsky" /><meta property="og:locale" content="en" /><meta name="description" content="Reusable workflows are great, but how do you ensure that teams are using your reusable workflows? In this post I show how you can structure repos, teams and environments to ensure standardization for your workflows." /><meta property="og:description" content="Reusable workflows are great, but how do you ensure that teams are using your reusable workflows? In this post I show how you can structure repos, teams and environments to ensure standardization for your workflows." /><link rel="canonical" href="https://github.com/pages/colindembovsky/enforcing-reusable-workflows-for-standardization/" /><meta property="og:url" content="https://github.com/pages/colindembovsky/enforcing-reusable-workflows-for-standardization/" /><meta property="og:site_name" content="Colin’s ALM Corner" /><meta property="og:image" content="https://github.com/pages/colindembovsky/assets/images/2021/11/compliance-reusable/hacker.jpg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-11-03T01:22:01+00:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://github.com/pages/colindembovsky/assets/images/2021/11/compliance-reusable/hacker.jpg" /><meta property="twitter:title" content="Enforcing Reusable Workflows for Standardization" /><meta name="twitter:site" content="@colindembovsky" /><meta name="twitter:creator" content="@colindembovsky" /> <script type="application/ld+json"> {"description":"Reusable workflows are great, but how do you ensure that teams are using your reusable workflows? In this post I show how you can structure repos, teams and environments to ensure standardization for your workflows.","url":"https://github.com/pages/colindembovsky/enforcing-reusable-workflows-for-standardization/","@type":"BlogPosting","headline":"Enforcing Reusable Workflows for Standardization","dateModified":"2021-11-03T01:22:01+00:00","datePublished":"2021-11-03T01:22:01+00:00","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://github.com/pages/colindembovsky/assets/img/logo.png"},"name":"Colin Dembovsky"},"image":"https://github.com/pages/colindembovsky/assets/images/2021/11/compliance-reusable/hacker.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https://github.com/pages/colindembovsky/enforcing-reusable-workflows-for-standardization/"},"author":{"@type":"Person","name":"Colin Dembovsky"},"@context":"https://schema.org"}</script><meta name="keywords" content="devops,github,actions,build,ci,cd"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Colin's ALM Corner"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="application-name" content="Colin's ALM Corner"><meta name="theme-color" content="rgb(5,19,24)"><meta name="generator" content="Hydejack v9.1.4" /><link rel="alternate" href="https://github.com/pages/colindembovsky/enforcing-reusable-workflows-for-standardization/" hreflang="en"><link type="application/atom+xml" rel="alternate" href="https://github.com/pages/colindembovsky/feed.xml" title="Colin's ALM Corner" /><link rel="shortcut icon" href="/pages/colindembovsky/assets/icons/favicon.ico"><link rel="apple-touch-icon" href="/pages/colindembovsky/assets/icons/icon-192x192.png"><link rel="manifest" href="/pages/colindembovsky/assets/site.webmanifest"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preload" href="/pages/colindembovsky/assets/img/swipe.svg" as="image" id="_hrefSwipeSVG"><link rel="dns-prefetch" href="/pages/colindembovsky/assets/js/search-worker-9.1.4.js" as="worker" id="_hrefSearch"> <script>!function(r,c){"use strict";function a(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}r.loadJS=function(e,t){var n=c.createElement("script");n.src=e,t&&a(n,"load",t,{once:!0});t=c.scripts[0];return t.parentNode.insertBefore(n,t),n},r._loaded=!1,r.loadJSDeferred=function(e,t){var n=c.createElement("script");function o(){r._loaded=!0,t&&a(n,"load",t,{once:!0});var e=c.scripts[0];e.parentNode.insertBefore(n,e)}return n.src=e,r._loaded?o():a(r,"load",o,{once:!0}),n},r.setRel=r.setRelStylesheet=function(e){a(c.getElementById(e),"load",function(){this.rel="stylesheet"},{once:!0})}}(window,document); !function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this); !function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this); !function(w) { w._baseURL = '/pages/colindembovsky/'; w._publicPath = '/pages/colindembovsky/assets/js/'; w._noPushState = false; w._noDrawer = false; w._noNavbar = false; w._noToc = false; w._noSearch = false; w._advertise = false; w._search = { DATA_URL: '/pages/colindembovsky/assets/sitedata.json?no-cache', STORAGE_KEY: 'mini-search/pages/colindembovsky/', INDEX_KEY: 'index--2021-11-18T20:23:33+00:00', }; w._clapButton = false; }(window);</script> <script async src="/pages/colindembovsky/assets/bower_components/MathJax/es5/tex-mml-chtml.js" id="_MathJax"></script> <!--[if gt IE 8]><!----><style id="_styleInline"> .clearfix,.sidebar-social::after{content:"";display:table;clear:both}.color-transition,body,p,hr,.hr,.hr-after::after,.hr-bottom,.message,.note-sm,.note,#markdown-toc,.navbar,.nav-btn-bar,.nav-btn,.content .avatar{transition:none}#_dark-mode{font-size:1.25rem}@media screen{body.light-mode{--body-color: #333;--body-bg: #fff;--border-color: #ebebeb;--gray: #777;--gray-bg: rgba(0,0,0,0.025);--gray-text: #666;--menu-text: #bbb;--inv-body-color: #ccc;--inv-body-bg: var(--dark-mode-body-bg)}body.light-mode .content{-webkit-font-smoothing:initial;-moz-osx-font-smoothing:initial}body.dark-mode{--body-color: #ccc;--body-bg: var(--dark-mode-body-bg);--border-color: var(--dark-mode-border-color);--gray: rgba(255,255,255,.5);--gray-bg: rgba(255,255,255,.033);--gray-text: rgba(255,255,255,.625);--menu-text: rgba(255,255,255,.25);--inv-body-color: #333;--inv-body-bg: #fff}body.dark-mode .content{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}}@media screen and (prefers-color-scheme: dark){body{--body-color: #ccc;--body-bg: var(--dark-mode-body-bg);--border-color: var(--dark-mode-border-color);--gray: rgba(255,255,255,.5);--gray-bg: rgba(255,255,255,.033);--gray-text: rgba(255,255,255,.625);--menu-text: rgba(255,255,255,.25);--inv-body-color: #333;--inv-body-bg: #fff}body .content{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.tippy-content{-webkit-font-smoothing:initial;-moz-osx-font-smoothing:initial}}html{--font-family: Noto Sans,Helvetica,Arial,sans-serif;--font-family-heading: Roboto Slab,Helvetica,Arial,sans-serif;--code-font-family: Fira Code,Menlo,Monaco,Consolas,monospace;--body-color: #333;--body-bg: #fff;--border-color: #ebebeb;--gray: #777;--gray-bg: rgba(0,0,0,0.025);--gray-text: #666;--menu-text: #bbb;--inv-body-color: #ccc;--inv-body-bg: var(--dark-mode-body-bg);--root-font-size: 15px;--root-font-size-medium: 16px;--root-font-size-large: 17px;--root-font-size-print: 8pt;--root-line-height: 1.75;--font-weight: 400;--font-weight-bold: 700;--font-weight-heading: 700;--content-width-5: 54rem;--content-margin-5: 4rem;--sidebar-width: 21rem;--half-content: 31rem;--break-point-3: 64em;--break-point-5: 86em;--break-point-dynamic: 1664px}html .content{-webkit-font-smoothing:initial;-moz-osx-font-smoothing:initial}*{box-sizing:border-box}html,body{margin:0;padding:0}html{font-family:var(--font-family);font-size:var(--root-font-size);line-height:var(--root-line-height)}body{color:var(--body-color);background-color:var(--body-bg);font-weight:var(--font-weight);overflow-y:scroll}.content img,.img,.content video,.video{max-width:100%;height:auto}.lead{margin-left:-1rem;margin-right:-1rem;margin-bottom:1.5rem}img.lead,video.lead{display:block;max-width:calc(100% + 2rem);width:calc(100% + 2rem);height:auto}.heading,.f1,h1,.h1,.f2,h2,.h2,.f3,h3,.h3,.f4,h4,.h4,.post-date,.sidebar-nav-item,.f5,h5,.h5,.f6,h6,.h6{font-family:var(--font-family-heading);font-weight:var(--font-weight-heading)}.f1,h1,.h1{font-size:2rem;line-height:1.3}.f2,h2,.h2{font-size:1.5rem;line-height:1.4}.f3,h3,.h3{font-size:1.2em;line-height:1.5}.f4,h4,.h4,.post-date,.sidebar-nav-item{font-size:1.08rem;line-height:1.6}.f5,h5,.h5{font-size:1.04rem;line-height:1.7}.f6,h6,.h6{font-size:1rem}.content h1>a,.content .h1>a{text-decoration:none;border-bottom:none}@media screen and (max-width: 42em){.content h1,.content .h1{font-size:1.7rem;line-height:1.35}}@media screen and (min-width: 86em){.content h1,.content .h1{font-size:2.4rem;line-height:1.25}}@media screen and (min-width: 1664px){body:not(.no-large-headings) .content h1,body:not(.no-large-headings) .content .h1{width:calc(100% + 50vw - 32rem);font-size:3rem;line-height:1.2}}@media screen and (min-width: 124em){body:not(.no-large-headings) .content h1,body:not(.no-large-headings) .content .h1{font-size:4rem;line-height:1.1}}h1,h2,h3,.h1,.h2,.h3{margin:4rem 0 1rem}h4,h5,h6,.h4,.post-date,.h5,.h6{margin:3rem 0 .5rem}p{margin-top:0;margin-bottom:1rem}p.lead{font-size:1.2em;margin-top:1.5rem;margin-bottom:1.5rem;padding:0 1rem}ul,ol,dl{margin-top:0;margin-bottom:1rem}ul,ol{padding-left:1.25rem}hr,.hr{border:0;margin:1rem 0;border-top:1px solid var(--border-color)}.hr-after::after{content:"";display:block;margin:1rem 0;border-top:1px solid var(--border-color)}.hr-bottom{border-bottom:1px solid var(--border-color);padding-bottom:.75rem;margin-bottom:1rem}.page{margin-bottom:3em}.page li+li{margin-top:.25rem}.page>header{position:relative;margin-bottom:1.5rem}@media screen and (min-width: 1664px){body:not(.no-third-column) .page>header>.lead+.note-sm,body:not(.no-third-column) .page>header>.lead+.note,body:not(.no-third-column) .page>header>.lead+#markdown-toc,body:not(.no-third-column) .page>header>a.no-hover+.note-sm,body:not(.no-third-column) .page>header>a.no-hover+.note,body:not(.no-third-column) .page>header>a.no-hover+#markdown-toc{position:absolute;right:-25rem;width:21rem;bottom:0;margin-bottom:0}}.page-title,.post-title{margin-top:0}.post-date{display:flex;justify-content:space-between;margin-top:-.6rem;height:2rem;margin-bottom:.85rem;color:var(--gray)}.post-date>.ellipsis,#breadcrumbs.post-date>ul{cursor:pointer}.post-date [class^="icon-"]{display:inline-block;font-size:smaller;margin-right:.25rem}.related-posts{padding-left:0;list-style:none;margin-bottom:2rem}.related-posts>li,.related-posts>li+li{margin-top:1rem}.message,.note-sm,.note,#markdown-toc{margin-bottom:1rem;padding:1rem;color:var(--gray-text);background-color:var(--gray-bg);margin-left:-1rem;margin-right:-1rem}.note-sm,.note,#markdown-toc{background:transparent;color:var(--body-color);font-size:smaller;border-left:1px solid var(--border-color);padding:1.2rem 1rem 0 1rem;margin:1rem -1rem;position:relative}.note-sm:before,.note:before,#markdown-toc:before{font-size:0.667rem;font-weight:bold;font-style:normal;letter-spacing:.025rem;text-transform:uppercase;color:var(--menu-text);position:absolute;top:0}.note-sm[title]:before,[title].note:before,[title]#markdown-toc:before{content:attr(title) !important}.note{font-size:1rem}@media screen{body::before{content:'';width:.5rem;background:var(--gray-bg);position:fixed;left:0;top:0;bottom:0}}@media (min-width: 64em){body::before{width:21rem}}@media (min-width: 1664px){body::before{width:calc(50% - 31rem)}}@media screen and (min-width: 42em){html{font-size:var(--root-font-size-medium)}}@media screen and (min-width: 124em){html{font-size:var(--root-font-size-large)}}#breadcrumbs>ul{height:1rem;margin:-1.5rem 0 .5rem;padding:0;font-size:.667rem;color:var(--menu-text);text-transform:uppercase;width:100%;list-style:none}#breadcrumbs>ul>li{display:inline}#breadcrumbs>ul>li a{color:var(--gray);text-decoration:none;border-bottom:none}.fl{float:left}.fr{float:right}.mb4{margin-bottom:4rem}.mb6{margin-bottom:6rem}.mt0{margin-top:0}.mt1{margin-top:1rem}.mt2{margin-top:2rem}.mt3{margin-top:3rem}.mt4{margin-top:4rem}.pb0{padding-bottom:0}.ml1{margin-left:1rem}.mr1{margin-right:1rem}.sixteen-nine{position:relative}.sixteen-nine::before{display:block;content:"";width:100%;padding-top:56.25%}.sixteen-nine>*{position:absolute;top:0;left:0;right:0;bottom:0}.sixteen-ten{position:relative}.sixteen-ten::before{display:block;content:"";width:100%;padding-top:62.5%}.sixteen-ten>*{position:absolute;top:0;left:0;right:0;bottom:0}.four-three{position:relative}.four-three::before{display:block;content:"";width:100%;padding-top:75%}.four-three>*{position:absolute;top:0;left:0;right:0;bottom:0}.sr-only{display:none}.larger{font-size:larger}.smaller{font-size:smaller}.clearfix,.sidebar-social::after{content:"";display:table;clear:both}.ellipsis,#breadcrumbs>ul{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.border{border:1px solid var(--border-color)}@media (min-width: 42em){.border-radius,.lead,.page .aspect-ratio.sixteen-nine.lead{border-radius:.5rem}}.fallback-img{background-position:center;background-repeat:no-repeat;background-image:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9IjkwIiB2aWV3Qm94PSIwIDAgMTYwIDkwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDQ4ODI4LCAwLCAwLCAwLjA0Nzk5MSwgNTQuOTk5OTczLCAyMC40MjgxNDgpIj4KICAgIDxwYXRoIHN0eWxlPSJmaWxsOnJnYmEoMTI4LDEyOCwxMjgsLjMzKSIgZD0iTTk1OS44ODQgMTI4YzAuMDQwIDAuMDM0IDAuMDgyIDAuMDc2IDAuMTE2IDAuMTE2djc2Ny43N2MtMC4wMzQgMC4wNDAtMC4wNzYgMC4wODItMC4xMTYgMC4xMTZoLTg5NS43N2MtMC4wNDAtMC4wMzQtMC4wODItMC4wNzYtMC4xMTQtMC4xMTZ2LTc2Ny43NzJjMC4wMzQtMC4wNDAgMC4wNzYtMC4wODIgMC4xMTQtMC4xMTRoODk1Ljc3ek05NjAgNjRoLTg5NmMtMzUuMiAwLTY0IDI4LjgtNjQgNjR2NzY4YzAgMzUuMiAyOC44IDY0IDY0IDY0aDg5NmMzNS4yIDAgNjQtMjguOCA2NC02NHYtNzY4YzAtMzUuMi0yOC44LTY0LTY0LTY0djB6Ii8+CiAgICA8cGF0aCBzdHlsZT0iZmlsbDpyZ2JhKDEyOCwxMjgsMTI4LC4zMykiIGQ9Ik04MzIgMjg4YzAgNTMuMDIwLTQyLjk4IDk2LTk2IDk2cy05Ni00Mi45OC05Ni05NiA0Mi45OC05NiA5Ni05NiA5NiA0Mi45OCA5NiA5NnoiLz4KICAgIDxwYXRoIHN0eWxlPSJmaWxsOnJnYmEoMTI4LDEyOCwxMjgsLjMzKSIgZD0iTTg5NiA4MzJoLTc2OHYtMTI4bDIyNC0zODQgMjU2IDMyMGg2NGwyMjQtMTkyeiIvPgogIDwvZz4KPC9zdmc+")}hy-push-state a{color:var(--body-color)}@supports not ((text-decoration-thickness: initial) and (text-underline-offset: initial)){hy-push-state a{text-decoration:none;border-bottom:2px solid}}@supports (text-decoration-thickness: initial) and (text-underline-offset: initial){hy-push-state a{text-decoration-style:solid;text-underline-offset:.35rem;text-decoration-thickness:2px}}hy-push-state a.no-hover{border-bottom:none;text-decoration-thickness:unset;text-underline-offset:unset}.content a:not(.btn):not(.no-hover){border-color:var(--accent-color-faded)}@supports (text-decoration-thickness: initial) and (text-underline-offset: initial){.content a:not(.btn):not(.no-hover){text-decoration-color:var(--accent-color-faded)}}.content .aspect-ratio{overflow:hidden}.content .aspect-ratio img{margin:0;width:100%;height:100%;background-color:var(--gray-bg)}hy-drawer{width:100%;position:relative;overflow:hidden;display:block;z-index:4}@media screen and (min-width: 64em){hy-drawer{position:fixed;width:21rem;top:0;left:0;bottom:0;margin-left:0}hy-drawer.cover{position:relative;width:100%}}@media screen and (min-width: 1664px){hy-drawer{width:calc(50% - 31rem)}}.sidebar{position:relative;display:flex;justify-content:center;align-items:center;color:rgba(255,255,255,0.75);text-align:center;min-height:100vh}.sidebar.invert{color:rgba(32,32,32,0.75)}.sidebar a{color:#fff;border-bottom-color:rgba(255,255,255,0.2);text-decoration-color:rgba(255,255,255,0.2)}.sidebar.invert a{color:#222;border-bottom-color:rgba(32,32,32,0.2);text-decoration-color:rgba(32,32,32,0.2)}.sidebar-bg{position:absolute;top:0;left:calc(50% - 50vw);width:100vw;height:100%;background:#202020 center / cover}.sidebar-bg::after{content:"";position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,0.05)}.sidebar-bg.sidebar-overlay::after{background:linear-gradient(to bottom, rgba(32,32,32,0) 0%, rgba(32,32,32,0.5) 50%, rgba(32,32,32,0) 100%)}.sidebar-sticky{position:relative;z-index:3;max-width:21rem;padding:1.5rem;contain:content}.sidebar-about .avatar{margin-bottom:1.5rem}.sidebar-about>a.sidebar-title{text-decoration:none}.sidebar-about>a.sidebar-title>h2{margin:0;padding-bottom:.5rem}.sidebar-about>a.sidebar-title::after{content:'';display:block;border-bottom:2px solid;margin:0 auto .5rem;width:4rem;border-color:rgba(255,255,255,0.2);transition:border-color 250ms}.sidebar-about>a.sidebar-title:hover::after{border-color:#fff;transition:border-color 50ms}.sidebar.invert .sidebar-about>a.sidebar-title::after{border-color:rgba(32,32,32,0.2)}.sidebar.invert .sidebar-about>a.sidebar-title:hover::after{border-color:#222}.sidebar-nav>ul{list-style:none;padding-left:0}.sidebar-nav-item{display:inline-block;margin-bottom:.5rem}@media (min-width: 64em){#_main.no-drawer #_menu{display:none}#_main.no-drawer .nav-btn-bar>:nth-child(2){border:none}}.sidebar-social>ul{display:inline-block;list-style:none;padding-left:0;margin-bottom:0}.sidebar-social>ul>li{float:left}.sidebar-social>ul>li>a{display:inline-block;text-align:center;font-size:1.4rem;width:3rem;height:4rem;padding:.5rem 0;line-height:3rem;text-decoration:none;border-bottom-width:2px;border-bottom-style:solid}.sidebar-social>ul li+li{margin-top:0}.fixed-common,.fixed-top,.fixed-bottom{position:fixed;left:0;width:100%;z-index:2}.fixed-top{top:0}.fixed-bottom{bottom:0}.navbar>.content{position:relative;padding-top:0;padding-bottom:0;min-height:0;max-height:5rem}.nav-btn-bar{margin:0 -1rem;background-color:white;background-color:var(--body-bg);height:5rem;display:flex;align-items:center;position:relative}.nav-btn-bar>:first-child,.nav-btn-bar>:last-child{border:none}.nav-btn{background:none;border:none;text-decoration:none;display:flex;align-items:center;justify-content:center;width:3.25rem;height:5rem;color:var(--menu-text);border-right:1px solid var(--border-color);border-left:1px solid var(--border-color);margin-left:-1px}#markdown-toc{margin:2rem -1rem 2rem calc(-1rem + 1px);padding-left:2.5rem;padding-bottom:.5rem}#markdown-toc:before{left:1rem}@media screen and (min-width: 1664px){body:not(.no-toc) #markdown-toc{position:absolute;z-index:4;width:20.5rem;right:0;margin:auto;overflow:auto}}@media screen and (min-width: 1664px){body.no-break-layout:not(.no-toc) #markdown-toc{width:calc(50% - 31rem)}}.content{margin-left:auto;margin-right:auto;padding:8rem 1rem 12rem}@media screen{.content{padding-left:1.5rem;min-height:100vh}}@media screen and (min-width: 42em){.content{max-width:42rem}}@media screen and (min-width: 54em){.content{max-width:48rem}}@media screen and (min-width: 64em){.content{padding-left:1rem;margin-left:24rem;margin-right:3rem}}@media screen and (min-width: 86em){.content{padding-top:9rem;margin-left:25rem;margin-right:4rem;max-width:54rem}}@media screen and (min-width: 1664px){.content{margin:auto}}.large-only{display:none}@media screen and (min-width: 1664px){.large-only{display:block}}.avatar{width:7rem;height:7rem;border-radius:100%;overflow:hidden;display:inline-block}.avatar img{width:100%}.content .avatar{float:right;box-sizing:content-box;border:1rem solid var(--body-bg);transition:border-color 1s ease;margin-top:-1.5rem;margin-right:-1rem}hr.dingbat{display:none}.center-image{margin:auto;display:block}.note:before{content:"Note"}.page>header>.note-sm:before,.page>header>.note:before,.page>header>#markdown-toc:before{content:"Description"}#markdown-toc:before{content:"Table of Contents"}.layout-resume .note-sm:before,.layout-resume .note:before,.layout-resume #markdown-toc:before{content:"Summary"} .clearfix,main:not(.layout-resume) .columns::after{content:"";display:table;clear:both}.color-transition,main:not(.layout-resume) .project-card{transition:none}main:not(.layout-resume) .columns{margin-left:-1rem;display:flex;flex-wrap:wrap;contain:content;padding-top:1rem;margin-top:1rem;padding-right:1rem;margin-right:-1rem}main:not(.layout-resume) .column{float:left;padding-left:1rem;margin-bottom:2rem;width:100%;display:flex}@media screen and (min-width: 42em){main:not(.layout-resume) .columns{margin-left:-2rem;margin-right:-2rem}main:not(.layout-resume) .column-1-2{width:50%}}@media screen and (min-width: 1664px){main:not(.layout-resume) .columns-break{width:calc(50vw + 25rem)}main:not(.layout-resume) .columns-break>.column-1-2,main:not(.layout-resume) .columns-break>.column-1{width:27.5rem}}@media print{main:not(.layout-resume) .columns{display:block}main:not(.layout-resume) .column{display:block;width:50%}}main:not(.layout-resume) .project-card{width:100%;color:var(--gray-text);background-color:var(--gray-bg);padding-bottom:1rem;position:relative;overflow:hidden;box-shadow:0.125rem 0.125rem 1rem rgba(0,0,0,0.2);contain:content;border-radius:.5rem;page-break-inside:avoid;transition:transform 500ms ease;will-change:transform}main:not(.layout-resume) .project-card:hover{transform:translateY(-0.25rem);transition:transform 250ms ease}main:not(.layout-resume) .project-card>a.flip-project{display:block}main:not(.layout-resume) .project-card>a.flip-project .project-card-img{margin-bottom:0}main:not(.layout-resume) .project-card>a.flip-project .project-card-img img{display:block;border-top-left-radius:.5rem;border-top-right-radius:.5rem}main:not(.layout-resume) .project-card a{position:relative;z-index:1}main:not(.layout-resume) .project-card a.fill-card{position:absolute;top:0;left:0;right:0;bottom:0;z-index:0}main:not(.layout-resume) .project-card>.project-card-title,main:not(.layout-resume) .project-card>.project-card-text{text-align:center;padding:0 1rem}main:not(.layout-resume) .project-card>.project-card-title{display:block;font-size:1.08rem;margin-top:.75rem;margin-bottom:.25rem;color:inherit}main:not(.layout-resume) .project-card>.project-card-text{margin:.25rem 0}main:not(.layout-resume) .column-1>.project-card>.project-card-title{font-size:1.2rem}main:not(.layout-resume) .column-1>.project-card>.project-card-text{font-size:1rem}</style><link rel="preload" as="style" href="/pages/colindembovsky/assets/css/hydejack-9.1.4.css" id="_stylePreload"><link rel="preload" as="style" href="/pages/colindembovsky/assets/icomoon/style.css" id="_iconsPreload"><link rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700%7CNoto+Sans:400,400i,700,700i&display=swap" id="_fontsPreload"> <script> setRel('_stylePreload'); setRel('_iconsPreload'); /**/setRel('_fontsPreload');/**/ </script> <noscript><link rel="stylesheet" href="/pages/colindembovsky/assets/css/hydejack-9.1.4.css"><link rel="stylesheet" href="/pages/colindembovsky/assets/icomoon/style.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700%7CNoto+Sans:400,400i,700,700i&display=swap"> </noscript><style id="_pageStyle"> html{--accent-color: rgb(79, 129, 220);--accent-color-faded: rgba(79,129,220,0.5);--accent-color-highlight: rgba(79,129,220,0.1);--accent-color-darkened: #2f6ad6;--theme-color: rgb(5,19,24);--dark-mode-body-bg: #292e30;--dark-mode-border-color: #353c3e}</style><!--<![endif]--> <script async src="https://www.googletagmanager.com/gtag/js?id=G-FD31RTDXK2"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-FD31RTDXK2'); </script><body class="no-break-layout"> <script> window._sunrise = 6; window._sunset = 18; !function(e,s){var d="light-mode",o="dark-mode",a=(new Date).getHours();"matchMedia"in e&&e.matchMedia("(prefers-color-scheme)")||(o=(e=a<=e._sunrise||a>=e._sunset?o:d)==o?d:o,s.body.classList.add(e),s.body.classList.remove(o))}(window,document); </script> <hy-push-state id="_pushState" replace-selector="#_main" link-selector="a[href]:not([href^='/pages/colindembovsky/assets/']):not(.external):not(.no-push-state)" script-selector="script" duration="500" hashchange ><div id="_navbar" class="navbar fixed-top"><div class="content"> <span class="sr-only">Jump to:</span><div class="nav-btn-bar"> <a id="_menu" class="nav-btn no-hover" href="#_drawer--opened"> <span class="sr-only">Navigation</span> <span class="icon-menu"></span> </a><div class="nav-span"></div></div></div></div><hr class="sr-only" hidden /><main id="_main" class="content layout-post" role="main" ><nav id="breadcrumbs" class="screen-only"><ul><li><a href="/pages/colindembovsky/">home</a><li> <span>/</span> <span>enforcing-reusable-workflows-for-standardization</span></ul></nav><article id="post-enforcing-reusable-workflows-for-standardization" class="page post mb6" role="article"><header><h1 class="post-title flip-project-title"> Enforcing Reusable Workflows for Standardization</h1><div class="post-date"> <span class="ellipsis mr1"> <time datetime="2021-11-03T01:22:01+00:00">03 Nov 2021</time> on <a href="/pages/colindembovsky/tag/build/" class="flip-title">build</a>, <a href="/pages/colindembovsky/tag/security/" class="flip-title">security</a> </span></div><div class="img-wrapper lead aspect-ratio sixteen-nine flip-project-img"> <img src="/pages/colindembovsky/assets/images/2021/11/compliance-reusable/hacker.jpg" alt="Enforcing Reusable Workflows for Standardization" width="864" height="486" loading="lazy" /></div><p class="note-sm" > Reusable workflows are great, but how do you ensure that teams are using your reusable workflows? In this post I show how you can structure repos, teams and environments to ensure standardization for your workflows.</header><ol id="markdown-toc"><li><a href="#problem-statement" id="markdown-toc-problem-statement">Problem Statement</a><li><a href="#configuration" id="markdown-toc-configuration">Configuration</a><ol><li><a href="#team-and-repo-configuration" id="markdown-toc-team-and-repo-configuration">Team and Repo Configuration</a><li><a href="#workflows" id="markdown-toc-workflows">Workflows</a><ol><li><a href="#app-team-code-scan-workflow" id="markdown-toc-app-team-code-scan-workflow">App Team Code Scan Workflow</a><li><a href="#app-team-code-scan-workflow-1" id="markdown-toc-app-team-code-scan-workflow-1">App Team Code Scan Workflow</a><li><a href="#the-build-workflow" id="markdown-toc-the-build-workflow">The Build Workflow</a><li><a href="#reusable-code-scan-workflow" id="markdown-toc-reusable-code-scan-workflow">Reusable Code Scan Workflow</a><li><a href="#reusable-deploy-workflow" id="markdown-toc-reusable-deploy-workflow">Reusable Deploy Workflow</a></ol><li><a href="#codeowners-file" id="markdown-toc-codeowners-file"><code class="language-plaintext highlighter-rouge">CODEOWNERS</code> File</a><li><a href="#branch-protection-policy" id="markdown-toc-branch-protection-policy">Branch Protection Policy</a><li><a href="#environments" id="markdown-toc-environments">Environments</a><li><a href="#secrets" id="markdown-toc-secrets">Secrets</a></ol><li><a href="#working-like-a-charm" id="markdown-toc-working-like-a-charm">Working Like a Charm</a><li><a href="#can-it-be-bypassed" id="markdown-toc-can-it-be-bypassed">Can It Be Bypassed?</a><ol><li><a href="#attempt-to-inject-bad-code" id="markdown-toc-attempt-to-inject-bad-code">Attempt to Inject Bad Code</a><li><a href="#attempt-to-deploy-a-bad-branch-to-prod" id="markdown-toc-attempt-to-deploy-a-bad-branch-to-prod">Attempt to Deploy a Bad Branch to Prod</a><li><a href="#attempt-to-change-deployment-steps" id="markdown-toc-attempt-to-change-deployment-steps">Attempt to Change Deployment Steps</a><li><a href="#attempt-to-change-codeowners" id="markdown-toc-attempt-to-change-codeowners">Attempt to Change <code class="language-plaintext highlighter-rouge">CODEOWNERS</code></a></ol><li><a href="#caring-about-culture" id="markdown-toc-caring-about-culture">Caring About Culture</a><li><a href="#conclusion" id="markdown-toc-conclusion">Conclusion</a></ol><blockquote><p>Image from <a href="https://www.freepik.com/vectors/flyer">www.freepik.com</a></blockquote><h1 id="problem-statement">Problem Statement</h1><p>There is a delicate balance between <em>team autonomy</em> and <em>enterprise alignment</em>. Too much autonomy can result in chaos, rework and runaway spending. Too much red tape can result in logn cycle times, frustration and lack of innovation. But it is possible to implement some level of compliance and leave teams some autonomy too.<p>Imagine you want to ensure that code that gets deployed is scanned using CodeQL. Furthermore, you want to enforce a specific set of steps for deploying your apps. You would prefer your app teams to be able to build, test and package applications themselves. In this post I’ll show how you can achieve do this using GitHub.<p>We’ll be working with two imaginary Teams: an App Team and a Compliance Team. Let’s take a look at the roles of these two teams:<table><thead><tr><th>Item<th>App Team<th>Compliance Team<tbody><tr><td><code class="language-plaintext highlighter-rouge">main</code> branch<td>Ensure that all code changes to <code class="language-plaintext highlighter-rouge">main</code> are peer-reviewed and pass quality gates before merge<td>Same as App Team<tr><td>Build, test and package the application<td>Responsible for this workflow<td>Reviews, but is really interested in the final deployable package<tr><td>Code Scan<td>-<td>Must ensure that all deployable code has been scanned<tr><td>Deployment<td>Provide package for deployment. Can also collaborate on deployment steps.<td>Final accountability and maintenance of deployment process<tr><td>Dev Environment<td>May want to gate with manual approval<td>Just supply the deployment process<tr><td>Prod Environment<td>-<td>Ensure only code from protected branches is deployed and configure manual approval gate</table><p>One way to achieve this may be for all PRs to require approvals from the Compliance Team - but this is not practical and does not scale.<p>A better solution is to use the following mechanism:<ol><li>Compliance Team configures the repo to allow <code class="language-plaintext highlighter-rouge">admin</code> access for the Compliance Team and <code class="language-plaintext highlighter-rouge">write</code> access for the App team.<li>Compliance Team creates reusable workflows for code scanning and deployment in a Workflows repo.<li>Compliance Team creates one or more <code class="language-plaintext highlighter-rouge">compliant-</code> workflows in the app repo’s <code class="language-plaintext highlighter-rouge">.github/workflows</code> directory. These workflows call the reusable workflows in the Worfklows repo.<li>Compliance Team creates a <code class="language-plaintext highlighter-rouge">CODEOWNERS</code> file, enforcing that changes to <code class="language-plaintext highlighter-rouge">.gitub/workflows/compliant-*</code> require approvals from the Compliance Team<li>Compliance Team configures <code class="language-plaintext highlighter-rouge">main</code> branch to be protected. <code class="language-plaintext highlighter-rouge">Require Code Review by CODEOWNERS</code> is enabled. <code class="language-plaintext highlighter-rouge">Required Checks</code> is enabled, requiring the <code class="language-plaintext highlighter-rouge">compliant-code-scan</code> workflow to pass before allowing merges. Other settings can be set in collaboration with the App Team.<li>Compliance Team creates <code class="language-plaintext highlighter-rouge">dev</code> and <code class="language-plaintext highlighter-rouge">prod</code> environments, requiring the appropriate approvers. On <code class="language-plaintext highlighter-rouge">prod</code>, require appropriate approvers and also require that only protected branches can be deployed.</ol><p>With this set of configuration, the Compliance Team can ensure that teams are following approved processes, not beome a bottleneck, and leave the App Team to get on with their work. Let’s walk through this configuration step by step.<h1 id="configuration">Configuration</h1><blockquote><p>Note: All the code for this demo is available in this <a href="https://github.com/colinsalmcorner/compliant-app">app repo</a> and in this <a href="https://github.com/colinsalmcorner/super-approved-workflows">workflow repo</a>. I’ve made these public repos to share content, but typically these would be internal or private repos in your GitHub org.</blockquote><h2 id="team-and-repo-configuration">Team and Repo Configuration</h2><p>Let’s start by configuring the Teams. While you could configure these setting using individuals, setting the <code class="language-plaintext highlighter-rouge">CODEOWNERS</code> to be owned bu the Compliance Team is more scalable - and as folks leave/join the team, you don’t have to update configuration in app repos. So you’ll need to create at least the Compliance Team in your organization, adding appropriate members. You can even make the team <code class="language-plaintext highlighter-rouge">Secret</code> if you choose to:<p><img src="/assets/images/2021/11/compliance-reusable/create-compliance-team.png" alt="Create a Compliance Team" class="center-image" /><p class="figcaption">Create a Compliance Team.<p>Now you can create a repo for your approved workflows. Obviously the Compliance Team should be the owners/contributors to this repo. Other teams can create PRs if they wish to, but should not be able to directly write to this repo, or at leat to the <code class="language-plaintext highlighter-rouge">main</code> branch.<p>For this example, I’m putting my reusable workflows into a repo called <code class="language-plaintext highlighter-rouge">super-approved-workflows</code>.<p>You can now create an App Team, though this is not necessary.<p>Now you can create the application repo. An administrator should ensure that the Compliance Team is set with <code class="language-plaintext highlighter-rouge">admin</code> priveledges on this repo, since they’ll have to do some initial configuration and will be adding files that the App Team cannot change without Compliance Team approvals. In the settings tab of my <code class="language-plaintext highlighter-rouge">compliant-app</code> repo, I’ve configured the Teams like this:<p><img src="/assets/images/2021/11/compliance-reusable/app-repo-settings.png" alt="Configure Team access on app repo" class="center-image" /><p class="figcaption">CConfigure Team access on app repo.<blockquote><p>Note: Ensure that the App Team are not given <code class="language-plaintext highlighter-rouge">admin</code> permissions, or they will be able to work around the compliance settings! I think that the team should only require <code class="language-plaintext highlighter-rouge">write</code> permissions, but there may be cases where <code class="language-plaintext highlighter-rouge">maintain</code> is required. Default to lowest priviledges first (i.e. <code class="language-plaintext highlighter-rouge">write</code>) and create an App Maintainer team for a subset of the app team if you really need <code class="language-plaintext highlighter-rouge">maintain</code> permissions for some operations. You can see the different between <code class="language-plaintext highlighter-rouge">maintain</code> and <code class="language-plaintext highlighter-rouge">write</code> <a href="https://docs.github.com/en/organizations/managing-access-to-your-organizations-repositories/repository-roles-for-an-organization#permissions-for-each-role">here</a>.</blockquote><h2 id="workflows">Workflows</h2><p>To help visualize how the workflow files are organized, I drew this awesome PowerPoint art:<p><img src="/assets/images/2021/11/compliance-reusable/workflows-for-compliance.png" alt="Overview of how the workflows are structured" class="center-image" /><p class="figcaption">Overview of how the workflows are structured.<p>Let’s now dig into the workflows.<h3 id="app-team-code-scan-workflow">App Team Code Scan Workflow</h3><p>The Compliance Team should add a workflow in the App Repo to scan code. We’ll have a look at the called workflow later, but for now, here is the workflow for the App Team:<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># file: 'APP_REPO/.github/workflows/compliant-scan.yml'</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Scan app</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>
  <span class="na">pull_request</span><span class="pi">:</span>
    <span class="na">branches</span><span class="pi">:</span> <span class="pi">[</span> <span class="nv">main</span> <span class="pi">]</span>
  <span class="na">push</span><span class="pi">:</span>
    <span class="na">branches</span><span class="pi">:</span> <span class="pi">[</span> <span class="nv">main</span> <span class="pi">]</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">scan</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Code scan</span>
    <span class="na">uses</span><span class="pi">:</span> <span class="s">colinsalmcorner/super-approved-workflows/.github/workflows/codeql-scan.yml@main</span>
    <span class="na">with</span><span class="pi">:</span>
      <span class="na">languages</span><span class="pi">:</span> <span class="s1">'</span><span class="s">["csharp"]'</span>

</code></pre></div></div><p class="figcaption"><code class="language-plaintext highlighter-rouge">compliant-scan.yml</code> workflow that invokes the centrally managed Code Scanning workflow.<p>Notes:<ol><li>The file name has the special <code class="language-plaintext highlighter-rouge">compliant-</code> prefix. Any changes to this file will require Compliance Team approvals (configured via the <code class="language-plaintext highlighter-rouge">CODEOWNERS</code> file).<li>We can add whatever triggers make sense, but should at least have <code class="language-plaintext highlighter-rouge">pull_request</code> and <code class="language-plaintext highlighter-rouge">push</code> to <code class="language-plaintext highlighter-rouge">main</code> trigger this workflow.<li>The job just calls the centrally managed, reusable code scan workflow, passing in the language(s) we want scanned.</ol><h3 id="app-team-code-scan-workflow-1">App Team Code Scan Workflow</h3><p>The Compliance Team should now add a workflow in the App Repo to scan code. We’ll have a look at the called workflow later, but for now, here is the workflow for the App Team:<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># file: 'APP_REPO/.github/workflows/compliant-deploy.yml'</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Deploy Pipeline</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Build</span>
    <span class="na">uses</span><span class="pi">:</span> <span class="s">colinsalmcorner/compliant-app/.github/workflows/build.yml@main</span>
    <span class="na">with</span><span class="pi">:</span>
      <span class="na">artifact-name</span><span class="pi">:</span> <span class="s">drop</span>

  <span class="na">dev</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy to DEV</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="s">build</span>
    <span class="na">uses</span><span class="pi">:</span> <span class="s">colinsalmcorner/super-approved-workflows/.github/workflows/deploy-app.yml@main</span>
    <span class="na">with</span><span class="pi">:</span>
      <span class="na">artifact-name</span><span class="pi">:</span> <span class="s">drop</span>
      <span class="na">environment-name</span><span class="pi">:</span> <span class="s">dev</span>
      <span class="na">environment-url</span><span class="pi">:</span> <span class="s">https://dev.my-super-app.net</span>
    <span class="na">secrets</span><span class="pi">:</span>
      <span class="na">PASSWORD</span><span class="pi">:</span> <span class="s">${{ secrets.DEV_PASSWORD }}</span>
  
  <span class="na">prod</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy to PROD</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="s">dev</span>
    <span class="na">uses</span><span class="pi">:</span> <span class="s">colinsalmcorner/super-approved-workflows/.github/workflows/deploy-app.yml@main</span>
    <span class="na">with</span><span class="pi">:</span>
      <span class="na">artifact-name</span><span class="pi">:</span> <span class="s">drop</span>
      <span class="na">environment-name</span><span class="pi">:</span> <span class="s">prod</span>
      <span class="na">environment-url</span><span class="pi">:</span> <span class="s">https://my-super-app.net</span>
    <span class="na">secrets</span><span class="pi">:</span>
      <span class="na">PASSWORD</span><span class="pi">:</span> <span class="s">${{ secrets.PROD_PASSWORD }}</span>

</code></pre></div></div><p class="figcaption"><code class="language-plaintext highlighter-rouge">compliant-deploy.yml</code> workflow that invokes a “local” reusable workflow and then invokes the centrally managed Deploy workflow for each environment.<p>Notes:<ol><li>Again, the file name has the special <code class="language-plaintext highlighter-rouge">compliant-</code> prefix. Any changes to this file will require Compliance Team approvals (configured via the <code class="language-plaintext highlighter-rouge">CODEOWNERS</code> file).<li>We can add whatever triggers make sense - in this case, I’ve just configured manual trigger (via <code class="language-plaintext highlighter-rouge">workflow_dispatch</code>).<li>There are three jobs: <code class="language-plaintext highlighter-rouge">build</code>, <code class="language-plaintext highlighter-rouge">dev</code> and <code class="language-plaintext highlighter-rouge">prod</code>.<li>The <code class="language-plaintext highlighter-rouge">build</code> job is calling a “local” (in the same repo) reusable workflow that the App Team has full control over that builds, tests and packages the app. To make this work with the deployment workflows, we need to publish an artifact (called <code class="language-plaintext highlighter-rouge">drop</code> in this case). The deploy workflow will download the artifact and then deploy.<li>We can pass whatever parameters we need to here - in this case I’ve configured parameters for the <code class="language-plaintext highlighter-rouge">artifact-name</code>, <code class="language-plaintext highlighter-rouge">environment-name</code> and <code class="language-plaintext highlighter-rouge">environment-url</code>.<li>Secrets are tricky since reusable workflows can’t (yet?) read environment secrets. So you have to specify secrets on the repo (or org) level that are prefixed with the environment name in some way.</ol><h3 id="the-build-workflow">The Build Workflow</h3><p>Before we switch over to the reusable workflows from the Compliance Team, let’s have a look at the <code class="language-plaintext highlighter-rouge">build.yml</code> workflow from the App Team:<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># file: 'APP_REPO/.github/workflows/compliant-deploy.yml'</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Build app</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">workflow_call</span><span class="pi">:</span>
    <span class="na">inputs</span><span class="pi">:</span>
      <span class="na">artifact-name</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">Name of the artifact to upload</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">default</span><span class="pi">:</span> <span class="s">drop</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Build</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">steps</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v2</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Setup .NET</span>
      <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/setup-dotnet@v1</span>
      <span class="na">with</span><span class="pi">:</span>
        <span class="na">dotnet-version</span><span class="pi">:</span> <span class="s">5.0.x</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Restore dependencies</span>
      <span class="na">run</span><span class="pi">:</span> <span class="s">dotnet restore</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Build</span>
      <span class="na">run</span><span class="pi">:</span> <span class="s">dotnet build --no-restore</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Test</span>
      <span class="na">if</span><span class="pi">:</span> <span class="s">${{ inputs.test }}</span>
      <span class="na">run</span><span class="pi">:</span> <span class="s">dotnet test --no-build --verbosity normal</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Publish</span>
      <span class="na">run</span><span class="pi">:</span> <span class="s">dotnet publish -c Release -o tmpdrop</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Upload a Build Artifact</span>
      <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/upload-artifact@v2.2.2</span>
      <span class="na">with</span><span class="pi">:</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">${{ inputs.artifact-name }}</span>
        <span class="na">path</span><span class="pi">:</span> <span class="s">tmpdrop/**</span>
        <span class="na">if-no-files-found</span><span class="pi">:</span> <span class="s">error</span>

</code></pre></div></div><p class="figcaption"><code class="language-plaintext highlighter-rouge">compliant-deploy.yml</code> workflow that invokes a “local” reusable workflow and then invokes the centrally managed Deploy workflow for each environment.<h3 id="reusable-code-scan-workflow">Reusable Code Scan Workflow</h3><p>This is just a stock CodeQL workflow that the Compliance Team will create in the Compliance repo. Obviously it must be reusable:<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># file: 'COMPLIANCE-REPO/.github/workflows/codeql-scan.yml'</span>
<span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">CodeQL"</span>

<span class="na">on</span><span class="pi">:</span> 
  <span class="na">workflow_call</span><span class="pi">:</span>
    <span class="na">inputs</span><span class="pi">:</span>
      <span class="na">languages</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">Languages to scan, in the format of JSON array, e.g. '["csharp", "typescript"]'</span>
        <span class="na">required</span><span class="pi">:</span> <span class="no">true</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
  
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">analyze</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Analyze</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="na">permissions</span><span class="pi">:</span>
      <span class="na">actions</span><span class="pi">:</span> <span class="s">read</span>
      <span class="na">contents</span><span class="pi">:</span> <span class="s">read</span>
      <span class="na">security-events</span><span class="pi">:</span> <span class="s">write</span>

    <span class="na">strategy</span><span class="pi">:</span>
      <span class="na">fail-fast</span><span class="pi">:</span> <span class="no">false</span>
      <span class="na">matrix</span><span class="pi">:</span>
        <span class="na">language</span><span class="pi">:</span> <span class="s">${{ fromJSON(inputs.languages) }}</span>

    <span class="na">steps</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Checkout repository</span>
      <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v2</span>

    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Initialize CodeQL</span>
      <span class="na">uses</span><span class="pi">:</span> <span class="s">github/codeql-action/init@v1</span>
      <span class="na">with</span><span class="pi">:</span>
        <span class="na">languages</span><span class="pi">:</span> <span class="s">${{ matrix.language }}</span>
    
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Autobuild</span>
      <span class="na">uses</span><span class="pi">:</span> <span class="s">github/codeql-action/autobuild@v1</span>

    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Perform CodeQL Analysis</span>
      <span class="na">uses</span><span class="pi">:</span> <span class="s">github/codeql-action/analyze@v1</span>

</code></pre></div></div><p class="figcaption"><code class="language-plaintext highlighter-rouge">codeql-scan.yml</code> workflow that runs CodeQL scanning.<p>Notes:<ol><li>The <code class="language-plaintext highlighter-rouge">workflow_call</code> makes this workflow reusable.<li>We pass in a JSON string of languages (since we can’t pass arrays to reusable workflows).<li>We specify minimal <code class="language-plaintext highlighter-rouge">permissions</code> for the workflow.<li>We create a matrix that spawns a job for each <code class="language-plaintext highlighter-rouge">language</code>: checkout, initialize, autobuild and then analyze.</ol><h3 id="reusable-deploy-workflow">Reusable Deploy Workflow</h3><p>This example shows how to download the build artifact and then dumps the secret to show that it’s getting a value. The actual deployment steps would be inserted into this workflow in real life.<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># file: 'COMPLIANCE-REPO/.github/workflows/deploy-app.yml'</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Build dotnet application</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">workflow_call</span><span class="pi">:</span>
    <span class="na">inputs</span><span class="pi">:</span>
      <span class="na">runs-on</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">Platform to execute on</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">default</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
        
      <span class="na">artifact-name</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">Name of the artifact to deploy</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">default</span><span class="pi">:</span> <span class="s">drop</span>
      
      <span class="na">environment-name</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">Name of environment</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">required</span><span class="pi">:</span> <span class="no">true</span>
      
      <span class="na">environment-url</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">URL of environment</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">required</span><span class="pi">:</span> <span class="no">true</span>
    
    <span class="na">secrets</span><span class="pi">:</span>
      <span class="na">PASSWORD</span><span class="pi">:</span>
        <span class="na">required</span><span class="pi">:</span> <span class="no">true</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">deploy</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy app</span>
    
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">${{ inputs.runs-on }}</span>
    
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">${{ inputs.environment-name }}</span>
      <span class="na">url</span><span class="pi">:</span> <span class="s">${{ inputs.environment-url }}</span>
    
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v2</span>

      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/download-artifact@v2</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">${{ inputs.artifact-name }}</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Display structure of downloaded files</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">ls -R</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Password</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">echo "JUST FOR TESTING</span><span class="pi">:</span> <span class="s">Password is ${{ secrets.PASSWORD }}"</span>

      <span class="c1">## INSERT deployment steps here</span>

</code></pre></div></div><p class="figcaption"><code class="language-plaintext highlighter-rouge">deploy-app.yml</code> workflow that downloads an artifact and has a placeholder for “real” deployment steps.<p>Notes:<ol><li>The <code class="language-plaintext highlighter-rouge">workflow_call</code> makes this workflow reusable.<li>We specify the input args and secrets that are required for deployment steps.<li>The <code class="language-plaintext highlighter-rouge">runs-on</code> and <code class="language-plaintext highlighter-rouge">environment</code> settings are configurable.<li>The workflow downloads the artifact, but doesn’t actually do anything with it - the real deployment steps would go at the bottom of the job.</ol><h2 id="codeowners-file"><code class="language-plaintext highlighter-rouge">CODEOWNERS</code> File</h2><p>The Compliance Team now creates a <code class="language-plaintext highlighter-rouge">CODEOWNERS</code> file in the <code class="language-plaintext highlighter-rouge">.github</code> folder of the App repo. This tells the repo that any changes to the files specified require review by the Compliance Team:<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Changes to `compliant-` workflows requires @compliance-team approval</span>
<span class="s">/.github/workflows/compliant-* @colinsalmcorner/compliance-team</span>

<span class="c1"># Changes to `CODEOWNERS` requires @compliance-team approval</span>
<span class="s">/.github/CODEOWNERS @colinsalmcorner/compliance-team</span>

</code></pre></div></div><p class="figcaption"><code class="language-plaintext highlighter-rouge">CODEOWNERS</code> file to enforce Compliance Team approvals for changes to <code class="language-plaintext highlighter-rouge">compliant-*</code> workflows.<blockquote><p>Note: The <code class="language-plaintext highlighter-rouge">compliant-</code> prefix is an arbitrary prefix. It can be anything you want, but in this case I wanted to distinguish between workflows the App Team can mess with and those that they can’t. All workflows must be in the <code class="language-plaintext highlighter-rouge">.github/workflows</code> folder, so adding a prefix was the only way this would work.</blockquote><h2 id="branch-protection-policy">Branch Protection Policy</h2><p>Now that we have the scaffolding in place, we need to ensure that no-one who doesn’t have permissions overwrites or changes files that they shouldn’t! We can do that using branch protection policies.<p>In the App Repo, navigate to <strong>Settings-&gt;Branches</strong> and apply the following settings to the <code class="language-plaintext highlighter-rouge">main</code> branch (or whatever your protected branch is called):<p><img src="/assets/images/2021/11/compliance-reusable/branch-protection-settings.png" alt="Configuring Branch Protection" class="center-image" /><p class="figcaption">Configuring Branch Protection.<p>Notes:<ol><li>We enable <code class="language-plaintext highlighter-rouge">Require a pull request before merging</code> and <code class="language-plaintext highlighter-rouge">Require approvals</code> - these should be default on any repo, regardless of compliance level.<li>We enable <code class="language-plaintext highlighter-rouge">Require review from Code Owners</code> to ensure the Compliance Team is notified of changes to the <code class="language-plaintext highlighter-rouge">compliant-</code> workflows.<li>To ensure that Code Scanning is performed for all deployable code, we enable <code class="language-plaintext highlighter-rouge">Require status checks to pass before merging</code> and then select the <code class="language-plaintext highlighter-rouge">Code Scan</code> workflow. We also enable <code class="language-plaintext highlighter-rouge">Require branches be up to date before merging</code> as a good practice.</ol><h2 id="environments">Environments</h2><p>The final bit of configuration is performed on the Environments. Let’s look at the settings for the <code class="language-plaintext highlighter-rouge">prod</code> environment:<p><img src="/assets/images/2021/11/compliance-reusable/environment-config.png" alt="Configuring the Prod Environment" class="center-image" /><p class="figcaption">Configuring the Prod Environment.<p>Notes:<ol><li>We add appropriate manual approvals.<li>Under <code class="language-plaintext highlighter-rouge">Deployent branches</code> we configure only <code class="language-plaintext highlighter-rouge">Protected branches</code> may be deployed (currently only <code class="language-plaintext highlighter-rouge">main</code>)</ol><h2 id="secrets">Secrets</h2><p>As mentioned, we’ll have to create environment-prefixed repo (or org) secrets since reusable workflows don’t support environment secrets. The Compliance Team can create <code class="language-plaintext highlighter-rouge">DEV_PASSWORD</code> and <code class="language-plaintext highlighter-rouge">PROD_PASSWORD</code> in this example.<h1 id="working-like-a-charm">Working Like a Charm</h1><p>Updates to <code class="language-plaintext highlighter-rouge">main</code> and PRs to <code class="language-plaintext highlighter-rouge">main</code> now trigger the code scanning workflow:<p><img src="/assets/images/2021/11/compliance-reusable/running-code-scan.png" alt="Code Scan running" class="center-image" /><p class="figcaption">Code Scan running.<p>If the Deploy pipeline is triggered in the Actions tab, the pipeline executes as expected. First, the <code class="language-plaintext highlighter-rouge">build</code> job builds, tests and packages the application. Then the <code class="language-plaintext highlighter-rouge">dev</code> deployment job is triggered to deploy to the <code class="language-plaintext highlighter-rouge">dev</code> environment. Finally, the <code class="language-plaintext highlighter-rouge">prod</code> job is triggered, but only from the <code class="language-plaintext highlighter-rouge">main</code> branch and with the pause for manual approval:<p><img src="/assets/images/2021/11/compliance-reusable/running-deploy.png" alt="Deploy Pipeline running" class="center-image" /><p class="figcaption">Deploy Pipeline running.<h1 id="can-it-be-bypassed">Can It Be Bypassed?</h1><p>Now that we have things configured, let’s see if we can bypass anything! I created an account called <code class="language-plaintext highlighter-rouge">faux-colin</code> that is a contributor on the App Repo - he’s part of the App Team. Let’s imagine he’s nefarious too!<h2 id="attempt-to-inject-bad-code">Attempt to Inject Bad Code</h2><p><code class="language-plaintext highlighter-rouge">faux-colin</code>’s first attack vector might be the code itself. So he tries to change the code on <code class="language-plaintext highlighter-rouge">main</code>. Cloning locally, changing the code, and pushing fails. In the UI, there’s no way to change code other than creating a branch and submitting a PR:<p><img src="/assets/images/2021/11/compliance-reusable/inject-bad-code.png" alt="Trying to inject bad code into main" class="center-image" /><p class="figcaption">Trying to inject bad code into <code class="language-plaintext highlighter-rouge">main</code>.<p>Looks like <code class="language-plaintext highlighter-rouge">faux-colin</code> will have to submit a PR. He can’t just sneak bad code into the codebase - at least, not into the <code class="language-plaintext highlighter-rouge">main</code> branch, without a code review.<h2 id="attempt-to-deploy-a-bad-branch-to-prod">Attempt to Deploy a Bad Branch to Prod</h2><p><code class="language-plaintext highlighter-rouge">faux-colin</code> then tries his second attack vector: he’ll inject bad code into a branch and then deploy <em>that</em> to production! He commits bad code to an innoucously named branch: <code class="language-plaintext highlighter-rouge">faux-colin-patch-2</code> for example. No PR - wouldn’t want anyone blocking the bad code, now would we? Now to sneak that code into production, he goes to the Actions tab and queues the Deployment Pipeline, selecting his malicious branch as the source:<p><img src="/assets/images/2021/11/compliance-reusable/queue-bad-code.png" alt="Queuing a deployment containing malicious code" class="center-image" /><p class="figcaption">Queuing a deployment containing malicious code.<p>Ha! Bad code on its way…<p>Except that the branch protection policy kicks in and prevents the deployment to prod!<p><img src="/assets/images/2021/11/compliance-reusable/no-prod-deploy.png" alt="Branch protection policy rejecting prod deployment" class="center-image" /><p class="figcaption">Branch protection policy rejecting prod deployment.<p>At worst, the malicious code is now in the dev environment. You could technically add approvals to the dev environment too, but if you’ve walled off your dev/prod environments correctly, the risk of malicious code in dev should be minimal. You have to trust your developers at some stage of the process, otherwise people will be totally bogged down in red tape. At least you can rest assured that prod environments are still protected.<h2 id="attempt-to-change-deployment-steps">Attempt to Change Deployment Steps</h2><p><code class="language-plaintext highlighter-rouge">faux-colin</code> then decides to change the workflows. Perhaps he doesn’t want code scanning to uncover the vulnerability he’s introducing, so he’ll just bypass the code scanning workflow. So he opens up the <code class="language-plaintext highlighter-rouge">.github/workflows/compliant-scan.yml</code> and removes the call to the reusable workflow:<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># file: 'APP-REPO/.github/workflows/compliant-scan.yml'</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Scan app</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>
  <span class="na">pull_request</span><span class="pi">:</span>
    <span class="na">branches</span><span class="pi">:</span> <span class="pi">[</span> <span class="nv">main</span> <span class="pi">]</span>
  <span class="na">push</span><span class="pi">:</span>
    <span class="na">branches</span><span class="pi">:</span> <span class="pi">[</span> <span class="nv">main</span> <span class="pi">]</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">scan</span><span class="pi">:</span>
    <span class="c1">#name: Code scan</span>
    <span class="c1">#uses: colinsalmcorner/super-approved-workflows/.github/workflows/codeql-scan.yml@main</span>
    <span class="c1">#with:</span>
    <span class="c1">#  languages: '["csharp"]'</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">steps</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">echo Code is secure</span>

</code></pre></div></div><p class="figcaption">Attempting to modify the <code class="language-plaintext highlighter-rouge">compliant-scan.yml</code> file.<p>Once again, he can’t do this on <code class="language-plaintext highlighter-rouge">main</code> so he has to create a branch and a PR. Interestingly, GitHub is smart enought to know that even though the workflow executed on the PR branch is the required workflow, it still required a check from the workflow in the <code class="language-plaintext highlighter-rouge">main</code> branch. In the screenshot below, you can see that the “bad” workflow (<code class="language-plaintext highlighter-rouge">Scan app / scan (pull_request)</code>) is passing, but the check is still blocked because the “good” workflow (<code class="language-plaintext highlighter-rouge">Code scan / Analyze (csharp)</code>) hasn’t been run:<p><img src="/assets/images/2021/11/compliance-reusable/bypass-code-scan-fail.png" alt="Unable to bypass the Code Scan workflow requirement" class="center-image" /><p class="figcaption">Unable to bypass the Code Scan workflow requirement.<h2 id="attempt-to-change-codeowners">Attempt to Change <code class="language-plaintext highlighter-rouge">CODEOWNERS</code></h2><p><code class="language-plaintext highlighter-rouge">faux-colin</code> then decides to see if he can jimmy the <code class="language-plaintext highlighter-rouge">CODEOWNERS</code> file. He tries to add himself as a code owner:<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Changes to `compliant-` workflows requires @compliance-team approval</span>
<span class="s">/.github/workflows/compliant-* @colinsalmcorner/compliance-team @faux-colin</span>

<span class="c1"># Changes to `CODEOWNERS` requires @compliance-team approval</span>
<span class="s">/.github/CODEOWNERS @colinsalmcorner/compliance-team @faux-colin</span>

</code></pre></div></div><p class="figcaption">Attempt to modify the <code class="language-plaintext highlighter-rouge">CODEOWNERS</code> file to add <code class="language-plaintext highlighter-rouge">faux-colin</code> as a code owner for the workflows.<p>Once again our hacker is foiled! A PR now contains his attempted modifications and merging would require approvals from the Compliance Team:<p><img src="/assets/images/2021/11/compliance-reusable/attempted-codeowner-change.png" alt="PR blocks unapproved changes to the CODEOWNERS file" class="center-image" /><p class="figcaption">PR blocks unapproved changes to the <code class="language-plaintext highlighter-rouge">CODEOWNERS</code> file.<h1 id="caring-about-culture">Caring About Culture</h1><p>It seems that <code class="language-plaintext highlighter-rouge">faux-colin</code> has not been able to inject malicious code into the application. Of course, this gives the Compliance Team peace of mind: after all, malicious developers are probably few and far between. However, if a malicious developer can’t bypass the process, then there’s little chance that a developer will <em>mistakenly</em> do something bad. There are enough checks and balances in the configuration.<p>That means that the Compliance Team have done their job and can <em>get out of the way</em> and let the App Team do what they do best - code, and hopefully innovate! Remember, DevOps (or DevSecOps if you really prefer) is <em>cultural</em> too. Here we have a good balance of process adherence and compliance without developers being overburdened with red tape or the Compliance Team becoming a bottleneck because they have to enforce draconian policies manually.<p>Caring about the culture your team works under is critical to success today. After all, Talent Management is one of the four top <a href="https://www.mckinsey.com/industries/technology-media-and-telecommunications/our-insights/developer-velocity-how-software-excellence-fuels-business-performance">Developer Velocity</a> <em>business</em> performance indicators. If you can ensure your code is safe and compliant <em>and</em> foster a positive culture, you’re winning. And using GitHub, you can!<h1 id="conclusion">Conclusion</h1><p>Using a combination of branch protection policies, permission management, reusable workflows, environment approvals and <code class="language-plaintext highlighter-rouge">CODEOWNERS</code> file, teams can achieve a good combination of autonomy and enterprise alignment. Compliance Teams can rest assured that the process is being enforced without becoming blockers. Developers are happy, Compliance is happy - and business will boom.<p>Happy complying!</article><hr class="dingbat related mb6" /><aside class="comments related" role="complementary"><h2 class="hr-bottom">Comments</h2><div id="giscus"><div></div></div><script> function toggle_giscus() { const c = document.body.classList; const dark = c.contains("dark-mode") || "_sunset" in window && !c.contains("light-mode") && matchMedia("(prefers-color-scheme: dark)").matches; const theme = dark ? "dark" : "light"; const scriptEl = document.createElement("script"); scriptEl.src = "https://giscus.app/client.js"; scriptEl.setAttribute("data-repo", "colindembovsky/colindembovsky.github.io"); scriptEl.setAttribute("data-repo-id", "MDEwOlJlcG9zaXRvcnk0MDczMjI3MjU="); scriptEl.setAttribute("data-category", "Giscussions"); scriptEl.setAttribute("data-category-id", "DIC_kwDOGEdAZc4B_F18"); scriptEl.setAttribute("data-mapping", "pathname"); scriptEl.setAttribute("data-reactions-enabled", "1"); scriptEl.setAttribute("data-emit-metadata", "colindembovsky/colindembovsky.github.io"); scriptEl.setAttribute("data-theme", theme); scriptEl.setAttribute("crossorigin", "anonymous"); const container = document.getElementById("giscus"); const old = container.firstElementChild; container.removeChild(old); container.appendChild(scriptEl); } document.addEventListener("hydejack-dark-mode-toggle", function() { toggle_giscus(); }); toggle_giscus(); </script></aside><aside class="other-projects related mb0" role="complementary"><h2>Related Posts</h2><div class="columns"><div class="column column-1-2"><article class="project-card"> <a href="/pages/colindembovsky/actions-authenticate-to-azure-without-a-secret/" class="no-hover no-print-link flip-project" tabindex="-1"><div class="project-card-img aspect-ratio sixteen-nine flip-project-img"> <img src="/pages/colindembovsky/assets/images/2021/11/oidc/Data_security_27.jpg" alt="GitHub Actions: Authenticate to Azure Without a Secret using OIDC" width="864" height="486" loading="lazy"/></div></a><h3 class="project-card-title flip-project-title"> <a href="/pages/colindembovsky/actions-authenticate-to-azure-without-a-secret/" class="flip-title">GitHub Actions: Authenticate to Azure Without a Secret using OIDC</a></h3><p class="project-card-text fine" property="disambiguatingDescription"> Authenticating to Azure in GitHub Actions requires a secret for a Service Principal. However, at Universe, GitHub released a new OIDC-based authentication mechanism that eliminates the need for secrets in secure deployments. <a class="fill-card no-hover" href="/pages/colindembovsky/actions-authenticate-to-azure-without-a-secret/" tabindex="-1"><span class="sr-only">Continue reading GitHub Actions: Authenticate to Azure Without a Secret using OIDC</span></a></article></div><div class="column column-1-2"><article class="project-card"> <a href="/pages/colindembovsky/on-demand-ephemeral-self-hosted-runners/" class="no-hover no-print-link flip-project" tabindex="-1"><div class="project-card-img aspect-ratio sixteen-nine flip-project-img"> <img src="/pages/colindembovsky/assets/images/2021/10/self-hosted-runners/boom.jpeg" alt="On Demand Ephemeral Self-Hosted Runners" width="864" height="486" loading="lazy"/></div></a><h3 class="project-card-title flip-project-title"> <a href="/pages/colindembovsky/on-demand-ephemeral-self-hosted-runners/" class="flip-title">On Demand Ephemeral Self-Hosted Runners</a></h3><p class="project-card-text fine" property="disambiguatingDescription"> Do you need to deploy to private VNets using GitHub Actions, but don’t want to have to keep self-hosted runners running all the time? In this post I show you how you can use Ephemeral Runners to create on-demand self-hosted runners. <a class="fill-card no-hover" href="/pages/colindembovsky/on-demand-ephemeral-self-hosted-runners/" tabindex="-1"><span class="sr-only">Continue reading On Demand Ephemeral Self-Hosted Runners</span></a></article></div></div></aside><aside class="related mb4" role="complementary"><h2 class="hr-bottom">Random Posts</h2><ul class="related-posts"><li class="h4"> <a href="/pages/colindembovsky/devops-drives-better-architecturepart-2-of-2/" class="flip-title"><span>DevOps Drives Better Architecture–Part 2 of 2</span></a> <time class="faded fine" datetime="2017-02-19T05:06:13+00:00">19 Feb 2017</time><li class="h4"> <a href="/pages/colindembovsky/tip-creating-task-groups-with-azure-service-endpoint-parameters/" class="flip-title"><span>Tip: Creating Task Groups with Azure Service Endpoint Parameters</span></a> <time class="faded fine" datetime="2018-04-26T02:03:43+00:00">26 Apr 2018</time><li class="h4"> <a href="/pages/colindembovsky/using-release-management-to-manage-ad-hoc-deployments/" class="flip-title"><span>Using Release Management to Manage Ad-Hoc Deployments</span></a> <time class="faded fine" datetime="2016-10-19T12:08:56+00:00">19 Oct 2016</time></ul></aside><footer class="content" role="contentinfo"><hr/><p><small class="copyright">© 2021. All rights reserved. </small><hr class="sr-only"/></footer></main><hy-drawer id="_drawer" class="" side="left" threshold="10" noscroll ><header id="_sidebar" class="sidebar" role="banner"><div class="sidebar-bg sidebar-overlay" style="background-color:rgb(5,19,24);background-image:url(/pages/colindembovsky/assets/img/sidebar-bg.jpg)"></div><div class="sidebar-sticky"><div class="sidebar-about"> <a class="no-hover" href="/pages/colindembovsky/" tabindex="-1"> <img src="/pages/colindembovsky/assets/img/logo.png" class="avatar" alt="Colin's ALM Corner" width="120" height="120" loading="lazy" /> </a> <a class="sidebar-title" href="/pages/colindembovsky/"><h2 class="h1">Colin's ALM Corner</h2></a><p class=""> DevOpsology &amp; GitHub. <br /> <em>Opinions my own</em>.</div><nav class="sidebar-nav heading" role="navigation"> <span class="sr-only">Navigation:</span><ul><li> <a id="_drawer--opened" href="/pages/colindembovsky/tags/" class="sidebar-nav-item " > Tags </a><li> <a href="/pages/colindembovsky/about/" class="sidebar-nav-item " > About </a></ul></nav><div class="sidebar-social"> <span class="sr-only">Social:</span><ul><li> <a href="https://twitter.com/colindembovsky" title="Twitter" class="no-mark-external"> <span class="icon-twitter"></span> <span class="sr-only">Twitter</span> </a><li> <a href="https://github.com/colindembovsky" title="GitHub" class="no-mark-external"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a><li> <a href="https://colinsalmcorner.com/feed.xml" title="RSS" class="no-mark-external"> <span class="icon-rss2"></span> <span class="sr-only">RSS</span> </a></ul></div></div></header></hy-drawer><hr class="sr-only" hidden /> </hy-push-state> <!--[if gt IE 10]><!----> <script nomodule>!function(){var t,n=document.createElement("script");!("noModule"in n)&&"onbeforeload"in n&&(t=!1,document.addEventListener("beforeload",function(e){if(e.target===n)t=!0;else if(!e.target.hasAttribute("nomodule")||!t)return;e.preventDefault()},!0),n.type="module",n.src=".",document.head.appendChild(n),n.remove())}(); </script> <script src="/pages/colindembovsky/assets/js/hydejack-9.1.4.js" type="module"></script> <script src="/pages/colindembovsky/assets/js/LEGACY-hydejack-9.1.4.js" nomodule defer></script> <script type="module"> if ('serviceWorker' in navigator) { /**/ navigator.serviceWorker.getRegistration() .then(r => r.unregister()) .catch(() => {}); /**/ } </script> <!--<![endif]--><div hidden><h2 class="sr-only">Templates (for web app):</h2><clap-config> <clap-text at="1">Keep going!</clap-text> <clap-text at="2">Keep going ×2!</clap-text> <clap-text at="3">Give me more!</clap-text> <clap-text at="5">Thank you, thank you</clap-text> <clap-text at="7">Far too kind!</clap-text> <clap-text at="10">Never gonna give me up?</clap-text> <clap-text at="14">Never gonna let me down?</clap-text> <clap-text at="20">Turn around and desert me!</clap-text> <clap-text at="30">You're an addict!</clap-text> <clap-text at="40">Son of a clapper!</clap-text> <clap-text at="50">No way</clap-text> <clap-text at="60">Go back to work!</clap-text> <clap-text at="70">This is getting out of <em>hand</em></clap-text> <clap-text at="80">Unbelievable</clap-text> <clap-text at="90">PREPOSTEROUS</clap-text> <clap-text at="100">I N S A N I T Y</clap-text> <clap-text at="185"><span style="font-family:monospace">FEED ME A STRAY CAT</span></clap-text> </clap-config> <template id="_animation-template"><div class="animation-main fixed-top"><nav id="breadcrumbs" class="screen-only"><ul></ul></nav><div class="content"><div class="page"></div></div></div></template> <template id="_loading-template"><div class="loading nav-btn fr"> <span class="sr-only">Loading…</span> <span class="icon-cog"></span></div></template> <template id="_error-template"><div class="page"><h1 class="page-title">Error</h1><p class="lead"> Sorry, an error occurred while loading <a class="this-link" href=""></a>.</div></template> <template id="_permalink-template"> <a href="#" class="permalink"> <span class="sr-only">Permalink</span> <span class="content-hash"></span> </a> </template> <template id="_cookies-banner-template"><div id="_cookies-banner" class="navbar fixed-bottom CookiesOK"><div class="content"><div class="nav-btn-bar"> <small class="faded"> <span>This site uses cookies. <a href="/cookies-policy/">Cookies Policy</a>. </span> <button id="_cookies-ok" class="btn btn-primary btn-sm">Okay</button> </small></div></div></div></template> <template id="_dark-mode-template"> <button id="_dark-mode" class="nav-btn no-hover" > <span class="sr-only">Dark Mode</span> <span class="icon-brightness-contrast"></span> </button> </template> <template id="_search-template"> <button id="_search" class="nav-btn no-hover"> <label class="sr-only" for="_search-input">Search</label> <span class="icon-search"></span> </button><div id="_search-box"><div class="nav-btn"> <span class="icon-search"></span></div><input id="_search-input" type="search" class="form-control form-control-lg nav-btn" placeholder="Type something…" /> <button type="reset" class="nav-btn no-hover"> <span class="sr-only">Close</span> <span class="icon-cross"></span> </button></div><div id="_hits"></div></template></div></html>
